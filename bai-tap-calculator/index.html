<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator Online</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="container" id="container">
      <div type="text" id="inputArea" name="inputArea" placeholder="0"></div>
      <div class="button-area">
        <table class="row-1">
          <td>
            <button
              style="background-color: rgba(255, 0, 0, 0.192); color: red"
              id="clear"
              value="C"
            >
              C
            </button>
          </td>
          <td><button id="light" onclick="light()">&#x1F4A1;</button></td>
          <td><button id="sqrt" onclick="sqrt()">&#178;&#8730;</button></td>
          <td>
            <button
              class="button-operator-color operator"
              value="/"
              id="divide"
              onclick="math(`/`)"
            >
              &#247;
            </button>
          </td>
        </table>
        <table>
          <td><button id="num7" class="number" value="7">7</button></td>
          <td><button id="num8" class="number" value="8">8</button></td>
          <td><button id="num9" class="number" value="9">9</button></td>
          <td>
            <button
              class="button-operator-color operator"
              value="*"
              id="multiply"
            >
              x
            </button>
          </td>
        </table>
        <table>
          <td><button id="num4" class="number" value="4">4</button></td>
          <td><button id="num5" class="number" value="5">5</button></td>
          <td><button id="num6" class="number" value="6">6</button></td>
          <td>
            <button
              class="button-operator-color operator"
              value="-"
              id="subtract"
              onclick="math(`-`)"
            >
              -
            </button>
          </td>
        </table>
        <table>
          <td><button id="num1" class="number" value="1">1</button></td>
          <td><button id="num2" class="number" value="2">2</button></td>
          <td><button id="num3" class="number" value="3">3</button></td>
          <td>
            <button class="button-operator-color operator" value="+" id="plus">
              +
            </button>
          </td>
        </table>
        <table>
          <td>
            <button style="font-size: 30px" value="." id="point">.</button>
          </td>
          <td><button id="num0" class="number" value="0">0</button></td>
          <td>
            <button id="backSpace" onclick="backSpace()">
              <i style="font-size: 20px" class="material-icons">backspace</i>
            </button>
          </td>
          <td>
            <button
              style="background-color: #2cca73; color: #ffffff"
              id="equal"
              value="="
            >
              =
            </button>
          </td>
        </table>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"
    ></script>

    <script>
      var result = [];
      var d;
      var e;
      var f;

      $("#clear").on("click", function () {
        result.splice(0);
        $("#inputArea").empty();
      });
      $("#num1").on("click", function () {
        result.push(1);
        $("#inputArea").html(result);
      });
      $("#num2").on("click", function () {
        result.push(2);
        $("#inputArea").html(result);
      });
      $("#num3").on("click", function () {
        result.push(3);
        $("#inputArea").html(result);
      });
      $("#num4").on("click", function () {
        result.push(4);
        $("#inputArea").html(result);
      });
      $("#num5").on("click", function () {
        result.push(5);
        $("#inputArea").html(result);
      });
      $("#num6").on("click", function () {
        result.push(6);
        $("#inputArea").html(result);
      });
      $("#num7").on("click", function () {
        result.push(7);
        $("#inputArea").html(result);
      });
      $("#num8").on("click", function () {
        result.push(8);
        $("#inputArea").html(result);
      });
      $("#num9").on("click", function () {
        result.push(9);
        $("#inputArea").html(result);
      });
      $("#num0").on("click", function () {
        result.push(0);
        $("#inputArea").html(result);
      });
      $("#point").on("click", function () {
        result.push(".");
        $("#inputArea").html(result);
      });

      function calculation() {
        result.forEach(function (element, index, array) {
          //check if 2 cal sign exist in the array
          if (
            isNaN(parseInt(element)) &&
            element != "." &&
            index != result.length - 1
          ) {
            d = result.splice(0, index).join("");
            e = result.splice(1, result.length - 2).join("");

            if (element == "+") {
              f = parseFloat(d) + parseFloat(e);
            }

            if (element == "-") {
              f = parseFloat(d) - parseFloat(e);
            }

            if (element == "x") {
              f = parseFloat(d) * parseFloat(e);
            }

            if (element == "/") {
              f = parseFloat(d) / parseFloat(e);
            }

            result[0] = f;

            $("#input").html(f);
          }
        });
      }

      function empty() {
        if (parseFloat(f) != 0 && result.length == 0) {
          result[0] = f;
        }
      }

      $("#plus").on("click", function () {
        empty();
        result.push("+");
        $("#inputArea").html(result);
        calculation();
      });

      $("#subtract").on("click", function () {
        empty();
        result.push("-");
        $("#inputArea").html(result);
        calculation();
      });

      $("#divide").on("click", function () {
        empty();
        result.push("/");
        $("#inputArea").html(result);
        calculation();
      });

      $("#multiply").on("click", function () {
        empty();
        result.push("x");
        $("#inputArea").html(result);
        calculation();
      });

      $("#equal").on("click", function () {
        result.forEach(function (element, index, array) {
          if (isNaN(parseInt(element)) && element != ".") {
            d = result.splice(0, index).join("");
            e = result.splice(1).join("");

            if (element == "+") {
              f = parseFloat(d) + parseFloat(e);
            }

            if (element == "-") {
              f = parseFloat(d) - parseFloat(e);
            }

            if (element == "x") {
              f = parseFloat(d) * parseFloat(e);
            }

            if (element == "/") {
              f = parseFloat(d) / parseFloat(e);
            }

            $("#inputArea").html(f);
            result.splice(0);
          }
        });
      });

      $(document).ready(function () {
        $("#light").click(function () {
          $("#container").toggleClass("dark-mode");
          $("#inputArea").toggleClass("dark-mode");
        });

        //   $("#light").click (function (){
        //         $("#container").css("background-color","white");
        //         $("#container").css("transition","0.5s");
        //   });
      });
    </script>
  </body>
</html>
